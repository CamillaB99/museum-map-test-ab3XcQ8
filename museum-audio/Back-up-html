



<!-- DEN HVOR DER ER TOGGLE UDEN KNAPPER
<!DOCTYPE html>

<html>
<head>
  <title>Museum Ovartaci Map</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    html, body { margin: 0; padding: 0; height: 100%; width: 100%; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; height: 100%; }
    #coord-box {
      position: absolute;
      top: 10px;
      left: 10px;
      background: white;
      padding: 10px;
      border: 1px solid #aaa;
      z-index: 1000;
      font-family: 'Times New Roman', Times, serif;
    }
    .play-button { width: 50px; height: 50px; margin: 5px; }
    .pause-button { width: 55px; height: 50px; margin: 5px; }
    .fade-in {
      opacity: 0;
      animation: fadeIn 0.4s ease-in forwards;
    }
    @keyframes fadeIn {
      to {
        opacity: 1;
      }
    }
  </style>
</head>
<body>

<div id="coord-box">Click on map to get X, Y %</div>
<div id="map"></div>

<!-- Section filter buttons -->

<div style="position:absolute; top:10px; right:10px; z-index:1001; background:white; padding:10px;">
  <button onclick="showOnlySection('Anslag')">Anslag</button>
  <button onclick="showOnlySection('Normalitet')">Normalitet</button>
  <button onclick="showOnlySection('Risskov')">Risskov</button>
  <button onclick="showOnlySection('Mods√¶tninger')">Mods√¶tninger</button>
  <button onclick="showOnlySection('Gemt og glemt')">Gemt og glemt</button>
  <button onclick="showOnlySection('Fantasi dr√∏mme visioner 01')">Fantasi 01</button>
  <button onclick="showOnlySection('Fantasi dr√∏mme visioner 02')">Fantasi 02</button>
  <button onclick="showOnlySection('Identitet')">Identitet</button>
  <button onclick="showOnlySection('Afslutning')">Afslutning</button>
</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>

// Add section filtering function
function showOnlySection(sectionName) {
  markers.forEach(marker => {
    if (marker._section === sectionName) {
      map.addLayer(marker);
    } else {
      map.removeLayer(marker);
    }
  });
}

// Your existing map code continues here...


  const imageWidth = 2500;
  const imageHeight = 1500;

  const map = L.map('map', {
    crs: L.CRS.Simple,
    minZoom: -2,
    maxZoom: 4,
    zoomSnap: 0.1,
    zoomDelta: 0.1
  });

  const bounds = [[0, 0], [imageHeight, imageWidth]];
  L.imageOverlay('Plan.png', bounds).addTo(map);
  map.fitBounds(bounds);
  map.setMaxBounds(bounds);
  map.options.maxBoundsViscosity = 1.0;

  let currentAudio = null;
  const markers = [];

   const locations = [
    { xPercent: 28.96, yPercent: 51.84, title: "HVORDAN FORST√ÖR <br> VI OS SELV ?", audio: "Forst√•r.m4a", section: "Normalitet" },
    { xPercent: 38.13, yPercent: 53.29, title: "ER DU NORMAL?", audio: "Normal.m4a", section: "Normalitet" },
    { xPercent: 45.50, yPercent: 69.80, title: "ET LIV MED MODS√ÜTNINGER", audio: "Mods√¶tninger.m4a", section: "Mods√¶tninger" },
    { xPercent: 67.93, yPercent: 72.24, title: "GEMT OG GLEMT", audio: "Gemt.m4a", section: "Gemt og glemt" },
    { xPercent: 71.99, yPercent: 14.40, title: "FANTASIENS KRAFT", audio: "Fantasi.m4a", section: "Fantasi dr√∏mme visioner 02" },
    { xPercent: 46.21, yPercent: 30.11, title: "HVEM ER VI?", audio: "Hvem.m4a", section: "Identitet"},
    { xPercent: 39.18, yPercent: 24.25, title: "AMPUTATIONEN", audio: "Amputationen.m4a", section: "Identitet"},
    { xPercent: 36.10, yPercent: 3.52, title: "Skab eller rejs", audio: "Skab.m4a", section: "Identitet"},
    { xPercent: 19.46, yPercent: 47.13, title: "TILTALEFORM", audio: "Tiltaleform.m4a", section: "Normalitet"},
    { xPercent: 21.61, yPercent: 62.14, title: "F√òR REJSEN", audio: "F√∏r.m4a", section: "Normalitet"},
    { xPercent: 27.35, yPercent: 69.58, title: "UNDER REJSEN", audio: "Under.m4a", section: "Normalitet"},
    { xPercent: 29.67, yPercent: 71.15, title: "EFTER REJSEN", audio: "Efter.m4a", section: "Normalitet"},
    { xPercent: 39.01, yPercent: 51.27, title: "ET LIV EFTER D√òDEN", audio: "Liv.m4a", section: "Mods√¶tninger"},
    { xPercent: 48.52, yPercent: 46.53, title: "KUNSTEN AT RYGE", audio: "Ryge.m4a", section: "Mods√¶tninger"},
    { xPercent: 69.11, yPercent: 53.99, title: "BETYDNINGEN AF <br> H√ÖNDENS ARBEJDE", audio: "H√•ndens.m4a", section: "Gemt og glemt"},
    { xPercent: 61.99, yPercent: 83.30, title: "MENINGSFYLDT <br> BESK√ÜFTIGELSE", audio: "Meningsfyldt.m4a", section: "Risskov"},
    { xPercent: 81.36, yPercent: 85.46, title: "INDDRAGELSE AF FRIHED", audio: "Inddragelse.m4a", section: "Risskov"},
    { xPercent: 83.82, yPercent: 61.56, title: "H√ÜNGEDUKKER", audio: "H√¶ngedukker.m4a", section: "Gemt og glemt"},
    { xPercent: 87.29, yPercent: 86.59, title: "FRIHED", audio: "Frihed.m4a", section: "Fantasi dr√∏mme visioner 01"},
    { xPercent: 78.11, yPercent: 27.11, title: "EN FANDENS FANTAST", audio: "Fantast.m4a", section: "Fantasi dr√∏mme visioner 02"},
    { xPercent: 69.54, yPercent: 44.27, title: "MEKANISK H√ò", audio: "Mekanisk.m4a", section: "Fantasi dr√∏mme visioner 02"},
    { xPercent: 59.42, yPercent: 9.09, title: "√ÜSTETIK OG <br> SPROGETS MELODI", audio: "√Üstetisk.m4a", section: "Fantasi dr√∏mme visioner 02"},
    { xPercent: 59.16, yPercent: 24.25, title: "KOSMOS-SKOLE", audio: "Kosmos.m4a", section: "Fantasi dr√∏mme visioner 02"},
    { xPercent: 57.96, yPercent: 23.39, title: "ALT HAR EN SJ√ÜL", audio: "Sj√¶l.m4a", section: "Identitet"},
    { xPercent: 49.90, yPercent: 43.98, title: "KROP OG HYLSTER", audio: "Krop.m4a", section: "Identitet"},
    { xPercent: 39.18, yPercent: 40.41, title: " BEFRI DIG", audio: "Befri.m4a", section: "Identitet"},
    { xPercent: 57.28, yPercent: 7.09, title: "ER DU DIT NAVN?", audio: "Navn.m4a", section: "Identitet"},
    { xPercent: 32.24, yPercent: 83.30, title: "HARALD SELMER <br> 1814-1879", audio: "Harald.m4a", section: "Risskov"},
    { xPercent: 36.95, yPercent: 21.96, title: "PATRICK LARSEN <br> 1951-1986", audio: "Patrick.m4a", section: "Identitet"},
    { xPercent: 34.04, yPercent: 44.13, title: "JETTE HANSEN <br> 1946-", audio: "Jette.m4a", section: "Identitet"},
  ];

const blackMarkers = [
  {xPercent: 10.45, yPercent: 62.02, title: "Anslag", audio: "Extra1.m4a", section: "Anslag"},
  {xPercent: 25.50, yPercent: 61.79, title: "Normalitet", audio: "Extra2.m4a", section: "Normalitet"},
  {xPercent: 49.34, yPercent: 79.19, title: "Risskov", audio: "Extra2.m4a", section: "Risskov"},
  {xPercent: 53.66, yPercent: 49.49, title: "Mods√¶tninger", audio: "Extra2.m4a", section: "Mods√¶tninger"},
  {xPercent: 73.86, yPercent: 52.97, title: "Gemt og glemt", audio: "Extra2.m4a", section: "Gemt og glemt"},
  {xPercent: 89.89, yPercent: 72.23, title: "Fantasi dr√∏mme visioner 01", audio: "Extra2.m4a", section: "Fantasi dr√∏mme visioner 01"},
  {xPercent: 63.97, yPercent: 22.81, title: "Fantasi dr√∏mme visioner 02", audio: "Extra2.m4a", section: "Fantasi dr√∏mme visioner 02"},
  {xPercent: 28.99, yPercent: 30.70, title: "Identitet", audio: "Extra2.m4a", section: "Identitet"},
  {xPercent: 24.67, yPercent: 9.82, title: "Afslutning", audio: "Extra2.m4a", section: "Afslutning"}
];

//Hjul 1
  const slideshowMarkers = [
    {
      xPercent: 57.36,
      yPercent: 4.66,
      type: 'wheel',
      title: "Hjul",
      section: "Identitet",
      slides: [
        { image: 'Kender.jpg', caption: 'Kender du dig selv?', audio: 'wheel1-slide1.m4a' },
        { image: 'Skiller.jpg', caption: 'Hvordan skiller du dig ud?', audio: 'wheel1-slide2.m4a' },
        { image: 'Hemmelighed.jpg', caption: 'Har du en hemmelighed?', audio: 'wheel1-slide2.m4a' },
        { image: 'H√¶nder.jpg', caption: 'Er du i gode h√¶nder?', audio: 'wheel1-slide2.m4a' },
        { image: 'Hedder.jpg', caption: 'Hvad hedder du?', audio: 'wheel1-slide2.m4a' },
        { image: 'Stammer.jpg', caption: 'Hvor stammer du fra?', audio: 'wheel1-slide2.m4a' }
      ]
    },
  
    //Hjul 2
    {
      xPercent: 57.26,
      yPercent: 27.68,
      type: 'wheel',
      title: "Hjul",
      section: "Identitet",
      slides: [
        { image: 'Kvinden.jpg', caption: 'Kvinden er guddommelig.', audio: 'wheel2-slide1.m4a' },
        { image: 'Sj√¶len.jpg', caption: 'Sj√¶len forlader legemet, n√•r vi d√∏r.', audio: 'wheel2-slide2.m4a' },
        { image: 'D√∏den.jpg', caption: 'D√∏den er overgangen til noget nyt.', audio: 'wheel2-slide2.m4a' },
        { image: 'Fri.jpg', caption: 'Hvorn√•r er du fri?', audio: 'wheel2-slide2.m4a' },
        { image: 'Kigger.jpg', caption: 'Kigger huse og tr√¶er tilbage p√• dig?', audio: 'wheel2-slide2.m4a' },
        { image: 'endestation.jpg', caption: 'Hvor er sj√¶lens endestation?', audio: 'wheel2-slide2.m4a' }
      ]
    },

    //Hjul 3
    {
      xPercent: 43.81,
      yPercent: 42.84,
      type: 'wheel',
      title: "Hjul",
      section: "Identitet",
      slides: [
        { image: 'Optr√¶de.jpg', caption: 'Nogle kan godt lide at optr√¶de andre kan ikke', audio: 'wheel2-slide1.m4a' },
        { image: 'Iscenesatte.jpg', caption: 'Kroppe er altid iscenesatte', audio: 'wheel2-slide2.m4a' },
        { image: 'Roller.jpg', caption: 'Vi har ofte bestemte roller blandt familie og venner', audio: 'wheel2-slide2.m4a' },
        { image: 'Kontrol.jpg', caption: 'Hvad vil det sige at have kontrol over sin krop?', audio: 'wheel2-slide2.m4a' },
        { image: 'Balance.jpg', caption: 'Hvorn√•r er kroppen i balance?', audio: 'wheel2-slide2.m4a' },
        { image: 'K√¶rlighed.jpg', caption: 'Kan k√¶rligheden tr√¶kkes i en automat?', audio: 'wheel2-slide2.m4a' }
      ]
    },

    //Touchscreen
    {
      xPercent: 37.47,
      yPercent: 51.57,
      type: 'touchscreen',
      title: "Touchsk√¶rm",
      section: "Normalitet",
      slides: [
        { image: 'Homoseksuel.jpg', caption: 'HOMOSEKSUEL', audio: 'touch1.m4a' },
        { image: 'Buddhisme.jpg', caption: 'BUDDHISME', audio: 'touch2.m4a' },
        { image: 'Yoga.jpg', caption: 'YOGA', audio: 'touch2.m4a' },
        { image: 'Vegetar.jpg', caption: 'VEGETAR', audio: 'touch2.m4a' },
        { image: 'K√∏n.jpg', caption: 'K√òN', audio: 'touch2.m4a' },
        { image: 'Alkohol.jpg', caption: 'ALKOHOL', audio: 'touch2.m4a' },
        { image: '√Ügteskab.jpg', caption: 'F√òDT UDENFOR √ÜGTESKAB', audio: 'touch2.m4a' },
        { image: 'Feminist.jpg', caption: 'FEMINIST', audio: 'touch2.m4a' },
        { image: 'Bukser.jpg', caption: 'BUKSER', audio: 'touch2.m4a' }
      ]
    }
  ];

  // -- Your locations, blackMarkers, slideshowMarkers definitions go here --

  function createIcon(size = 20) {
    return L.icon({
      iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png',
      iconSize: [size, size * 1.6],
      iconAnchor: [size / 2, size * 1.6],
      popupAnchor: [0, -size * 1.6]
    });
  }

  function createColoredIcon(color) {
    const iconUrl = {
      yellow: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-yellow.png',
      blue: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-blue.png',
      black: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-black.png'
    }[color] || 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png';

    return L.icon({
      iconUrl,
      iconSize: [30, 48],
      iconAnchor: [15, 48],
      popupAnchor: [0, -48]
    });
  }

  function addMarkers() {
    const icon = createIcon(30);
    locations.forEach(loc => {
      const x = (loc.xPercent / 100) * imageWidth;
      const y = (loc.yPercent / 100) * imageHeight;
      const marker = L.marker([y, x], { icon }).addTo(map);
      marker._markerType = 'red';
      marker._section = loc.section;
      const popupContent = `
   <b>${loc.title}</b><br>
  <img class="play-button" src="play.png" onclick="playAudio('${loc.audio}')">
  <img class="pause-button" src="pause.png" onclick="pauseAudio()">
`;

      marker.bindPopup(popupContent);
      markers.push(marker);
    });
  }

  function addBlackMarkers() {
  const icon = createColoredIcon('black');
  blackMarkers.forEach(loc => {
    const x = (loc.xPercent / 100) * imageWidth;
    const y = (loc.yPercent / 100) * imageHeight;
    const marker = L.marker([y, x], { icon }).addTo(map);
    marker._section = loc.section;  // Move this inside the loop here
    const popupContent = `
      <b>${loc.title}</b><br>
      <img class="play-button" src="play.png" onclick="playAudio('${loc.audio}')">
      <img class="pause-button" src="pause.png" onclick="pauseAudio()">
    `;
    marker.bindPopup(popupContent);
    markers.push(marker);
  });
}



  function getSlideHTML(markerData, slide, index, markerId) {
  return `
    <div style="text-align:center;">
      <b>${markerData.title}</b><br>
      <img src="${slide.image}" style="width:200px;" class="fade-in"><br>
      <em>${slide.caption || ""}</em><br>
      <button onclick="playAudio('${slide.audio}')">üîä</button><br><br>
      <button onclick="event.preventDefault(); changeSlide(${index - 1}, '${markerId}')">‚¨ÖÔ∏è</button>
      <button onclick="event.preventDefault(); changeSlide(${index + 1}, '${markerId}')">‚û°Ô∏è</button> 
    </div>
  `;
}


 function addSlideshowMarkers() {
  slideshowMarkers.forEach(markerData => {
    const x = (markerData.xPercent / 100) * imageWidth;
    const y = (markerData.yPercent / 100) * imageHeight;
    const color = markerData.type === 'touchscreen' ? 'blue' : 'yellow';
    const icon = createColoredIcon(color);
    const marker = L.marker([y, x], { icon }).addTo(map);
    marker._section = markerData.section;  // Fix here: assign section properly
    marker._slideIndex = 0;
    marker._slides = markerData.slides;
    marker._updatePopup = () => {
      const currentSlide = marker._slides[marker._slideIndex];
      const img = new Image();
      img.src = currentSlide.image;
      img.onload = () => {
        const popupContent = getSlideHTML(markerData, currentSlide, marker._slideIndex, marker._leaflet_id);
        marker.setPopupContent(popupContent).openPopup();
      };
    };
    marker.bindPopup("");
    marker.on('popupopen', () => {
      marker._updatePopup();
    });
    markers.push(marker);
  });
}


  window.changeSlide = function(newIndex, markerId) {
    const m = map._layers[markerId];
    if (!m || !m._slides) return;
    const slides = m._slides;
    m._slideIndex = (newIndex + slides.length) % slides.length;
    setTimeout(() => {
      m._updatePopup();
    }, 0);
  };

  function playAudio(url) {
    if (currentAudio) {
      const currentFile = decodeURI(currentAudio.src.split('/').pop());
      if (currentFile === url) {
        if (currentAudio.paused) currentAudio.play();
        return;
      } else {
        currentAudio.pause();
      }
    }
    currentAudio = new Audio(url);
    currentAudio.play();
  }

  function pauseAudio() {
    if (currentAudio) currentAudio.pause();
  }

  map.on('click', function(e) {
    const y = e.latlng.lat;
    const x = e.latlng.lng;
    const xPercent = ((x / imageWidth) * 100).toFixed(2);
    const yPercent = ((y / imageHeight) * 100).toFixed(2);
    document.getElementById('coord-box').innerText = `X: ${xPercent}%, Y: ${yPercent}%`;
    console.log(`X: ${xPercent}%, Y: ${yPercent}%`);
  });

    function fitFullMap() {
    map.invalidateSize();
    map.fitBounds(bounds, { animate: false });
  }

  fitFullMap();
  window.addEventListener('resize', fitFullMap);

  map.on('zoomend', function() {
    const zoom = map.getZoom();
    const size = 30 + zoom * 3;
    const newIcon = createIcon(size);
    markers.forEach(marker => {
      if (marker._markerType === 'red') {
    marker.setIcon(createIcon(size));
  }

    });
  });

  addMarkers();
  addBlackMarkers();
  addSlideshowMarkers();
</script>

</body>
</html>
--></img>

<!-- KODE MED HJUL OG TOUCHSK√ÜRME
 <!DOCTYPE html>

<html>
<head>
  <title>Museum Ovartaci Map</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    html, body { margin: 0; padding: 0; height: 100%; width: 100%; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; height: 100%; }
    #coord-box {
      position: absolute;
      top: 10px;
      left: 10px;
      background: white;
      padding: 10px;
      border: 1px solid #aaa;
      z-index: 1000;
      font-family: 'Times New Roman', Times, serif;
    }
    .play-button { width: 50px; height: 50px; margin: 5px; }
    .pause-button { width: 55px; height: 50px; margin: 5px; }
  .fade-in {
    opacity: 0;
    animation: fadeIn 0.4s ease-in forwards;
  }

  @keyframes fadeIn {
    to {
      opacity: 1;
    }
  }

  </style>
</head>
<body>

<div id="coord-box">Click on map to get X, Y %</div>
<div id="map"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>
  const imageWidth = 2500;
  const imageHeight = 1500;

  const map = L.map('map', {
    crs: L.CRS.Simple,
    minZoom: -2,
    maxZoom: 4,
    zoomSnap: 0.1,
    zoomDelta: 0.1
  });

  const bounds = [[0, 0], [imageHeight, imageWidth]];
  L.imageOverlay('Plan.png', bounds).addTo(map);
  map.fitBounds(bounds);
  map.setMaxBounds(bounds);
  map.options.maxBoundsViscosity = 1.0;

  let currentAudio = null;
  const markers = [];

  const locations = [
    { xPercent: 28.96, yPercent: 51.84, title: "HVORDAN FORST√ÖR <br> VI OS SELV ?", audio: "Forst√•r.m4a" },
    { xPercent: 38.13, yPercent: 53.29, title: "ER DU NORMAL?", audio: "Normal.m4a" },
    { xPercent: 45.50, yPercent: 69.80, title: "ET LIV MED MODS√ÜTNINGER", audio: "Mods√¶tninger.m4a" },
    { xPercent: 67.93, yPercent: 72.24, title: "GEMT OG GLEMT", audio: "Gemt.m4a" },
    { xPercent: 71.99, yPercent: 14.40, title: "FANTASIENS KRAFT", audio: "Fantasi.m4a" },
    { xPercent: 46.21, yPercent: 30.11, title: "HVEM ER VI?", audio: "Hvem.m4a"},
    { xPercent: 39.18, yPercent: 24.25, title: "AMPUTATIONEN", audio: "Amputationen.m4a"},
    { xPercent: 36.10, yPercent: 3.52, title: "Skab eller rejs", audio: "Skab.m4a"},
    { xPercent: 19.46, yPercent: 47.13, title: "TILTALEFORM", audio: "Tiltaleform.m4a"},
    { xPercent: 21.61, yPercent: 62.14, title: "F√òR REJSEN", audio: "F√∏r.m4a"},
    { xPercent: 27.35, yPercent: 69.58, title: "UNDER REJSEN", audio: "Under.m4a"},
    { xPercent: 29.67, yPercent: 71.15, title: "EFTER REJSEN", audio: "Efter.m4a"},
    { xPercent: 39.01, yPercent: 51.27, title: "ET LIV EFTER D√òDEN", audio: "Liv.m4a"},
    { xPercent: 48.52, yPercent: 46.53, title: "KUNSTEN AT RYGE", audio: "Ryge.m4a"},
    { xPercent: 69.11, yPercent: 53.99, title: "BETYDNINGEN AF <br> H√ÖNDENS ARBEJDE", audio: "H√•ndens.m4a"},
    { xPercent: 61.99, yPercent: 83.30, title: "MENINGSFYLDT <br> BESK√ÜFTIGELSE", audio: "Meningsfyldt.m4a"},
    { xPercent: 81.36, yPercent: 85.46, title: "INDDRAGELSE AF FRIHED", audio: "Inddragelse.m4a"},
    { xPercent: 83.82, yPercent: 61.56, title: "H√ÜNGEDUKKER", audio: "H√¶ngedukker.m4a"},
    { xPercent: 87.29, yPercent: 86.59, title: "FRIHED", audio: "Frihed.m4a"},
    { xPercent: 78.11, yPercent: 27.11, title: "EN FANDENS FANTAST", audio: "Fantast.m4a"},
    { xPercent: 69.54, yPercent: 44.27, title: "MEKANISK H√ò", audio: "Mekanisk.m4a"},
    { xPercent: 59.42, yPercent: 9.09, title: "√ÜSTETIK OG <br> SPROGETS MELODI", audio: "√Üstetisk.m4a"},
    { xPercent: 59.16, yPercent: 24.25, title: "KOSMOS-SKOLE", audio: "Kosmos.m4a"},
    { xPercent: 57.96, yPercent: 23.39, title: "ALT HAR EN SJ√ÜL", audio: "Sj√¶l.m4a"},
    { xPercent: 49.90, yPercent: 43.98, title: "KROP OG HYLSTER", audio: "Krop.m4a"},
    { xPercent: 39.18, yPercent: 40.41, title: " BEFRI DIG", audio: "Befri.m4a"},
    { xPercent: 57.28, yPercent: 7.09, title: "ER DU DIT NAVN?", audio: "Navn.m4a"},
    { xPercent: 32.24, yPercent: 83.30, title: "HARALD SELMER <br> 1814-1879", audio: "Harald.m4a"},
    { xPercent: 36.95, yPercent: 21.96, title: "PATRICK LARSEN <br> 1951-1986", audio: "Patrick.m4a"},
    { xPercent: 34.04, yPercent: 44.13, title: "JETTE HANSEN <br> 1946-", audio: "Jette.m4a"}
  ];
const blackMarkers = [
  {xPercent: 10.45, yPercent: 62.02, title: "Anslag", audio: "Extra1.m4a"},
  {xPercent: 25.50, yPercent: 61.79, title: "Normalitet", audio: "Extra2.m4a"},
  {xPercent: 49.34, yPercent: 79.19, title: "Risskov", audio: "Extra2.m4a"},
  {xPercent: 53.66, yPercent: 49.49, title: "Mods√¶tninger", audio: "Extra2.m4a"},
  {xPercent: 73.86, yPercent: 52.97, title: "Gemt og glemt", audio: "Extra2.m4a"},
  {xPercent: 89.89, yPercent: 72.23, title: "Fantasi dr√∏mme visioner 01", audio: "Extra2.m4a"},
  {xPercent: 63.97, yPercent: 22.81, title: "Fantasi dr√∏mme visioner 02", audio: "Extra2.m4a"},
  {xPercent: 28.99, yPercent: 30.70, title: "Identitet", audio: "Extra2.m4a"},
  {xPercent: 24.67, yPercent: 9.82, title: "Afslutning", audio: "Extra2.m4a"}
];

//Hjul 1
  const slideshowMarkers = [
    {
      xPercent: 57.36,
      yPercent: 4.66,
      type: 'wheel',
      title: "Hjul",
      slides: [
        { image: 'Kender.jpg', caption: 'Kender du dig selv?', audio: 'wheel1-slide1.m4a' },
        { image: 'Skiller.jpg', caption: 'Hvordan skiller du dig ud?', audio: 'wheel1-slide2.m4a' },
        { image: 'Hemmelighed.jpg', caption: 'Har du en hemmelighed?', audio: 'wheel1-slide2.m4a' },
        { image: 'H√¶nder.jpg', caption: 'Er du i gode h√¶nder?', audio: 'wheel1-slide2.m4a' },
        { image: 'Hedder.jpg', caption: 'Hvad hedder du?', audio: 'wheel1-slide2.m4a' },
        { image: 'Stammer.jpg', caption: 'Hvor stammer du fra?', audio: 'wheel1-slide2.m4a' }
      ]
    },
  
    //Hjul 2
    {
      xPercent: 57.26,
      yPercent: 27.68,
      type: 'wheel',
      title: "Hjul",
      slides: [
        { image: 'Kvinden.jpg', caption: 'Kvinden er guddommelig.', audio: 'wheel2-slide1.m4a' },
        { image: 'Sj√¶len.jpg', caption: 'Sj√¶len forlader legemet, n√•r vi d√∏r.', audio: 'wheel2-slide2.m4a' },
        { image: 'D√∏den.jpg', caption: 'D√∏den er overgangen til noget nyt.', audio: 'wheel2-slide2.m4a' },
        { image: 'Fri.jpg', caption: 'Hvorn√•r er du fri?', audio: 'wheel2-slide2.m4a' },
        { image: 'Kigger.jpg', caption: 'Kigger huse og tr√¶er tilbage p√• dig?', audio: 'wheel2-slide2.m4a' },
        { image: 'endestation.jpg', caption: 'Hvor er sj√¶lens endestation?', audio: 'wheel2-slide2.m4a' }
      ]
    },

    //Hjul 3
    {
      xPercent: 43.81,
      yPercent: 42.84,
      type: 'wheel',
      title: "Hjul",
      slides: [
        { image: 'Optr√¶de.jpg', caption: 'Nogle kan godt lide at optr√¶de andre kan ikke', audio: 'wheel2-slide1.m4a' },
        { image: 'Iscenesatte.jpg', caption: 'Kroppe er altid iscenesatte', audio: 'wheel2-slide2.m4a' },
        { image: 'Roller.jpg', caption: 'Vi har ofte bestemte roller blandt familie og venner', audio: 'wheel2-slide2.m4a' },
        { image: 'Kontrol.jpg', caption: 'Hvad vil det sige at have kontrol over sin krop?', audio: 'wheel2-slide2.m4a' },
        { image: 'Balance.jpg', caption: 'Hvorn√•r er kroppen i balance?', audio: 'wheel2-slide2.m4a' },
        { image: 'K√¶rlighed.jpg', caption: 'Kan k√¶rligheden tr√¶kkes i en automat?', audio: 'wheel2-slide2.m4a' }
      ]
    },

    //Touchscreen
    {
      xPercent: 37.47,
      yPercent: 51.57,
      type: 'touchscreen',
      title: "Touchsk√¶rm",
      slides: [
        { image: 'Homoseksuel.jpg', caption: 'HOMOSEKSUEL', audio: 'touch1.m4a' },
        { image: 'Buddhisme.jpg', caption: 'BUDDHISME', audio: 'touch2.m4a' },
        { image: 'Yoga.jpg', caption: 'YOGA', audio: 'touch2.m4a' },
        { image: 'Vegetar.jpg', caption: 'VEGETAR', audio: 'touch2.m4a' },
        { image: 'K√∏n.jpg', caption: 'K√òN', audio: 'touch2.m4a' },
        { image: 'Alkohol.jpg', caption: 'ALKOHOL', audio: 'touch2.m4a' },
        { image: '√Ügteskab.jpg', caption: 'F√òDT UDENFOR √ÜGTESKAB', audio: 'touch2.m4a' },
        { image: 'Feminist.jpg', caption: 'FEMINIST', audio: 'touch2.m4a' },
        { image: 'Bukser.jpg', caption: 'BUKSER', audio: 'touch2.m4a' }
      ]
    }
  ];

  function createIcon(size = 20) {
    return L.icon({
      iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png',
      iconSize: [size, size * 1.6],
      iconAnchor: [size / 2, size * 1.6],
      popupAnchor: [0, -size * 1.6]
    });
  }

  function createColoredIcon(color) {
  const iconUrl = {
    yellow: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-yellow.png',
    blue: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-blue.png',
    black: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-black.png'
  }[color] || 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png';

  return L.icon({
    iconUrl,
    iconSize: [30, 48],
    iconAnchor: [15, 48],
    popupAnchor: [0, -48]
  });
}

  

  function addMarkers() {
    const icon = createIcon(30);
    locations.forEach(loc => {
      const x = (loc.xPercent / 100) * imageWidth;
      const y = (loc.yPercent / 100) * imageHeight;

      const marker = L.marker([y, x], { icon }).addTo(map);
      marker._markerType = 'red';
      const popupContent = `
        <b>${loc.title}</b><br>
        <img class="play-button" src="play.png" onclick="playAudio('${loc.audio}')">
        <img class="pause-button" src="pause.png" onclick="pauseAudio()">
      `;
      marker.bindPopup(popupContent);
      markers.push(marker);
    });
  }

  function addBlackMarkers() {
  const icon = createColoredIcon('black');

  blackMarkers.forEach(loc => {
    const x = (loc.xPercent / 100) * imageWidth;
    const y = (loc.yPercent / 100) * imageHeight;

    const marker = L.marker([y, x], { icon }).addTo(map);
    const popupContent = `
      <b>${loc.title}</b><br>
      <img class="play-button" src="play.png" onclick="playAudio('${loc.audio}')">
      <img class="pause-button" src="pause.png" onclick="pauseAudio()">
    `;
    marker.bindPopup(popupContent);
    markers.push(marker);
  });
}


 function getSlideHTML(markerData, slide, index, markerId) {
  return `
    <div style="text-align:center;">
      <b>${markerData.title}</b><br>
      <img src="${slide.image}" style="width:200px;" class="fade-in"><br>
      <em>${slide.caption || ""}</em><br>
      <button onclick="playAudio('${slide.audio}')">üîä</button><br><br>
      <button onclick="event.preventDefault(); changeSlide(${index - 1}, '${markerId}')">‚¨ÖÔ∏è</button>
      <button onclick="event.preventDefault(); changeSlide(${index + 1}, '${markerId}')">‚û°Ô∏è</button> 
    </div>
  `;
}


 function addSlideshowMarkers() {
  slideshowMarkers.forEach(markerData => {
    const x = (markerData.xPercent / 100) * imageWidth;
    const y = (markerData.yPercent / 100) * imageHeight;

    const color = markerData.type === 'touchscreen' ? 'blue' : 'yellow';
    const icon = createColoredIcon(color);

    const marker = L.marker([y, x], { icon }).addTo(map);

    // Setup initial data
    marker._slideIndex = 0;
    marker._slides = markerData.slides;

    // Define update function to render current slide
  marker._updatePopup = () => {
  const currentSlide = marker._slides[marker._slideIndex];

  // Preload image
  const img = new Image();
  img.src = currentSlide.image;

  img.onload = () => {
    const popupContent = getSlideHTML(markerData, currentSlide, marker._slideIndex, marker._leaflet_id);
    marker.setPopupContent(popupContent).openPopup();
  };
};


    // Create the popup (empty for now)
    marker.bindPopup("");

    // When the popup opens, load the current slide
    marker.on('popupopen', () => {
      marker._updatePopup();
    });

    markers.push(marker);
  });
}


window.changeSlide = function(newIndex, markerId) {
  const m = map._layers[markerId];
  if (!m || !m._slides) return;

  const slides = m._slides;
  m._slideIndex = (newIndex + slides.length) % slides.length;

  // Delay update to ensure Leaflet doesn't auto-close popup
  setTimeout(() => {
    m._updatePopup();
  }, 0);
};


  function playAudio(url) {
    if (currentAudio) {
      const currentFile = decodeURI(currentAudio.src.split('/').pop());
      if (currentFile === url) {
        if (currentAudio.paused) currentAudio.play();
        return;
      } else {
        currentAudio.pause();
      }
    }
    currentAudio = new Audio(url);
    currentAudio.play();
  }

  function pauseAudio() {
    if (currentAudio) currentAudio.pause();
  }

  map.on('click', function(e) {
    const y = e.latlng.lat;
    const x = e.latlng.lng;
    const xPercent = ((x / imageWidth) * 100).toFixed(2);
    const yPercent = ((y / imageHeight) * 100).toFixed(2);
    document.getElementById('coord-box').innerText = `X: ${xPercent}%, Y: ${yPercent}%`;
    console.log(`X: ${xPercent}%, Y: ${yPercent}%`);
  });

  function fitFullMap() {
    map.invalidateSize();
    map.fitBounds(bounds, { animate: false });
  }

  fitFullMap();
  window.addEventListener('resize', fitFullMap);

  map.on('zoomend', function() {
    const zoom = map.getZoom();
    const size = 30 + zoom * 3;
    const newIcon = createIcon(size);
    markers.forEach(marker => {
      if (marker._markerType === 'red') {
    marker.setIcon(createIcon(size));
  }

    });
  });

  addMarkers();
  addBlackMarkers();
  addSlideshowMarkers();
</script>

</body>
</html>

-->

<!--DEN DER VIRKER UDEN HJUL
<!DOCTYPE html>
<html>
<head>
  <title>Museum Ovartaci Map</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    html, body { margin: 0; padding: 0; height: 100%; width: 100%; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; height: 100%; }
    #coord-box {
      position: absolute;
      top: 10px;
      left: 10px;
      background: white;
      padding: 10px;
      border: 1px solid #aaa;
      z-index: 1000;
      font-family: 'Times New Roman', Times, serif;
    }
    .play-button {
      width: 50px;
      height: 50px;
      margin: 5px;
    }
    .pause-button {
      width: 55px;
      height: 50px;
      margin: 5px;
    }
  </style>
</head>
<body>

<div id="coord-box">Click on map to get X, Y %</div>
<div id="map"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
  const imageWidth = 2500;
  const imageHeight = 1500;

  const map = L.map('map', {
    crs: L.CRS.Simple,
    minZoom: -2,
    maxZoom: 4,
    zoomSnap: 0.1,
    zoomDelta: 0.1
  });

  const bounds = [[0, 0], [imageHeight, imageWidth]];
  L.imageOverlay('Plan.png', bounds).addTo(map);
  map.fitBounds(bounds);
  map.setMaxBounds(bounds);
  map.options.maxBoundsViscosity = 1.0;

  const locations = [
    { xPercent: 28.96, yPercent: 51.84, title: "HVORDAN FORST√ÖR <br> VI OS SELV ?", audio: "Forst√•r.m4a" },
    { xPercent: 38.13, yPercent: 53.29, title: "ER DU NORMAL?", audio: "Normal.m4a" },
    { xPercent: 45.50, yPercent: 69.80, title: "ET LIV MED MODS√ÜTNINGER", audio: "Mods√¶tninger.m4a" },
    { xPercent: 67.93, yPercent: 72.24, title: "GEMT OG GLEMT", audio: "Gemt.m4a" },
    { xPercent: 71.99, yPercent: 14.40, title: "FANTASIENS KRAFT", audio: "Fantasi.m4a" },
    { xPercent: 46.21, yPercent: 30.11, title: "HVEM ER VI?", audio: "Hvem.m4a"},
    { xPercent: 39.18, yPercent: 24.25, title: "AMPUTATIONEN", audio: "Amputationen.m4a"},
    { xPercent: 36.10, yPercent: 3.52, title: "Skab eller rejs", audio: "Skab.m4a"},
    { xPercent: 19.46, yPercent: 47.13, title: "TILTALEFORM", audio: "Tiltaleform.m4a"},
    { xPercent: 21.61, yPercent: 62.14, title: "F√òR REJSEN", audio: "F√∏r.m4a"},
    { xPercent: 27.35, yPercent: 69.58, title: "UNDER REJSEN", audio: "Under.m4a"},
    { xPercent: 29.67, yPercent: 71.15, title: "EFTER REJSEN", audio: "Efter.m4a"},
    { xPercent: 39.01, yPercent: 51.27, title: "ET LIV EFTER D√òDEN", audio: "Liv.m4a"},
    { xPercent: 48.52, yPercent: 46.53, title: "KUNSTEN AT RYGE", audio: "Ryge.m4a"},
    { xPercent: 69.11, yPercent: 53.99, title: "BETYDNINGEN AF <br> H√ÖNDENS ARBEJDE", audio: "H√•ndens.m4a"},
    { xPercent: 61.99, yPercent: 83.30, title: "MENINGSFYLDT <br> BESK√ÜFTIGELSE", audio: "Meningsfyldt.m4a"},
    { xPercent: 81.36, yPercent: 85.46, title: "INDDRAGELSE AF FRIHED", audio: "Inddragelse.m4a"},
    { xPercent: 83.82, yPercent: 61.56, title: "H√ÜNGEDUKKER", audio: "H√¶ngedukker.m4a"},
    { xPercent: 87.29, yPercent: 86.59, title: "FRIHED", audio: "Frihed.m4a"},
    { xPercent: 78.11, yPercent: 27.11, title: "EN FANDENS FANTAST", audio: "Fantast.m4a"},
    { xPercent: 69.54, yPercent: 44.27, title: "MEKANISK H√ò", audio: "Mekanisk.m4a"},
    { xPercent: 59.42, yPercent: 9.09, title: "√ÜSTETIK OG <br> SPROGETS MELODI", audio: "√Üstetisk.m4a"},
    { xPercent: 59.16, yPercent: 24.25, title: "KOSMOS-SKOLE", audio: "Kosmos.m4a"},
    { xPercent: 57.96, yPercent: 23.39, title: "ALT HAR EN SJ√ÜL", audio: "Sj√¶l.m4a"},
    { xPercent: 49.90, yPercent: 43.98, title: "KROP OG HYLSTER", audio: "Krop.m4a"},
    { xPercent: 39.18, yPercent: 40.41, title: " BEFRI DIG", audio: "Befri.m4a"},
    { xPercent: 57.28, yPercent: 7.09, title: "ER DU DIT NAVN?", audio: "Navn.m4a"},
    { xPercent: 32.24, yPercent: 83.30, title: "HARALD SELMER <br> 1814-1879", audio: "Harald.m4a"},
    { xPercent: 36.95, yPercent: 21.96, title: "PATRICK LARSEN <br> 1951-1986", audio: "Patrick.m4a"},
    { xPercent: 34.04, yPercent: 44.13, title: "JETTE HANSEN <br> 1946-", audio: "Jette.m4a"}
  ];

  let currentAudio = null;
  const markers = [];

  function createIcon(size) {
    return L.icon({
      iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png',
      iconSize: [size, size * 1.6],
      iconAnchor: [size / 2, size * 1.6],
      popupAnchor: [0, -size * 1.6]
    });
  }

  function addMarkers() {
    const initialSize = 25;
    const icon = createIcon(initialSize);

    locations.forEach(loc => {
      const x = (loc.xPercent / 100) * imageWidth;
      const y = (loc.yPercent / 100) * imageHeight;

      const marker = L.marker([y, x], { icon: icon }).addTo(map);

      const popupContent = `<b>${loc.title}</b><br>
        <img class="play-button" src="play.png" onclick="playAudio('${loc.audio}')">
        <img class="pause-button" src="pause.png" onclick="pauseAudio()">`;

      marker.bindPopup(popupContent);
      markers.push(marker);
    });
  }

  addMarkers();

  function playAudio(url) {
    if (currentAudio) {
      const currentFile = decodeURI(currentAudio.src.split('/').pop());
      if (currentFile === url) {
        if (currentAudio.paused) currentAudio.play();
        return;
      } else {
        currentAudio.pause();
      }
    }
    currentAudio = new Audio(url);
    currentAudio.play();
  }

  function pauseAudio() {
    if (currentAudio) currentAudio.pause();
  }

  // ‚úÖ Click handler to get coordinates
  map.on('click', function(e) {
    const y = e.latlng.lat;
    const x = e.latlng.lng;
    const xPercent = ((x / imageWidth) * 100).toFixed(2);
    const yPercent = ((y / imageHeight) * 100).toFixed(2);
    document.getElementById('coord-box').innerText = `X: ${xPercent}%, Y: ${yPercent}%`;
    console.log(`X: ${xPercent}%, Y: ${yPercent}%`);
  });

  // ‚úÖ resize keeps map fitting full bounds
  function fitFullMap() {
    map.invalidateSize();
    map.fitBounds(bounds, { animate: false });
  }

  fitFullMap();
  window.addEventListener('resize', fitFullMap);

  map.on('zoomend', function() {
    const zoom = map.getZoom();
    const size = 30 + zoom * 3;
    const newIcon = createIcon(size);
    markers.forEach(marker => marker.setIcon(newIcon));
  });

</script>

</body>
</html>
-->

<!--  CODE THAT WORKS PERFECTLY WITHOUT SHOWING X AND Y
<!DOCTYPE html>
<html>
<head>
  <title>Museum Ovartaci Map</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    html, body { margin: 0; padding: 0; height: 100%; width: 100%; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; height: 100%; }
    #coord-box {
      position: absolute;
      top: 10px;
      left: 10px;
      background: white;
      padding: 10px;
      border: 1px solid #aaa;
      z-index: 1000;
      font-family: 'Times New Roman', Times, serif;
    }

    .play-button {
      width: 50px;
      height: 50px;
      margin: 5px;
    }
    .pause-button {
      width: 55px;
      height: 50px;
      margin: 5px;
    }
  </style>
</head>
<body>

<div id="coord-box">Click on map to get X, Y %</div>
<div id="map"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
  const imageWidth = 2500;
  const imageHeight = 1500;

  const map = L.map('map', {
    crs: L.CRS.Simple,
    minZoom: -2,
    maxZoom: 4,
    zoomSnap: 0.1,
    zoomDelta: 0.1
  });

  const bounds = [[0, 0], [imageHeight, imageWidth]];
  L.imageOverlay('Plan.png', bounds).addTo(map);
  map.fitBounds(bounds);
  map.setMaxBounds(bounds);

  const locations = [
    { xPercent: 29.67, yPercent: 52.5, title: "HVORDAN FORST√ÖR <br> VI OS SELV ?", audio: "Forst√•r.m4a" },
    { xPercent: 39, yPercent: 53, title: "ER DU NORMAL?", audio: "Normal.m4a" },
    { xPercent: 46, yPercent: 69, title: "ET LIV MED MODS√ÜTNINGER", audio: "Mods√¶tninger.m4a" },
    { xPercent: 68, yPercent: 71, title: "GEMT OG GLEMT", audio: "Gemt.m4a" },
    { xPercent: 71, yPercent: 17, title: "FANTASIENS KRAFT", audio: "Fantasi.m4a" }
  ];

  let currentAudio = null;
  const markers = [];

  function createIcon(size) {
    return L.icon({
      iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png',
      iconSize: [size, size * 1.6], // keep aspect ratio (original 25x41)
      iconAnchor: [size / 2, size * 1.6], // center bottom
      popupAnchor: [0, -size * 1.6]
    });
  }

  function addMarkers() {
    const initialSize = 30; // starting size
    const icon = createIcon(initialSize);

    locations.forEach(loc => {
      const x = (loc.xPercent / 100) * imageWidth;
      const y = (loc.yPercent / 100) * imageHeight;

      const marker = L.marker([y, x], { icon: icon }).addTo(map);

      const popupContent = `<b>${loc.title}</b><br>
        <img class="play-button" src="play.png" onclick="playAudio('${loc.audio}')">
        <img class="pause-button" src="pause.png" onclick="pauseAudio()">`;

      marker.bindPopup(popupContent);
      markers.push(marker);
    });
  }

  addMarkers();

  function playAudio(url) {
    if (currentAudio) {
      const currentFile = decodeURI(currentAudio.src.split('/').pop());
      if (currentFile === url) {
        if (currentAudio.paused) currentAudio.play();
        return;
      } else {
        currentAudio.pause();
      }
    }
    currentAudio = new Audio(url);
    currentAudio.play();
  }

  function pauseAudio() {
    if (currentAudio) currentAudio.pause();
  }

  map.setMaxBounds(bounds);
map.options.maxBoundsViscosity = 1.0;

function fitFullMap() {
  map.invalidateSize();
  map.fitBounds(bounds, { animate: false });
}

fitFullMap();

window.addEventListener('resize', fitFullMap);


adjustZoomToFit();


  map.on('click', function(e) {
    const y = e.latlng.lat;
    const x = e.latlng.lng;
    const xPercent = ((x / imageWidth) * 100).toFixed(2);
    const yPercent = ((y / imageHeight) * 100).toFixed(2);
    document.getElementById('coord-box').innerText = `X: ${xPercent}%, Y: ${yPercent}%`;
    console.log(`X: ${xPercent}%, Y: ${yPercent}%`);
  });

  map.on('zoomend', function() {
    const zoom = map.getZoom();
    const size = 30 + zoom * 3;
    const newIcon = createIcon(size);
    markers.forEach(marker => marker.setIcon(newIcon));
  });

  window.addEventListener('resize', function() {
    map.invalidateSize();
    map.setView([imageHeight / 2, imageWidth / 2], 0);
  });

  // --- CLICK HELPER ---
map.on('click', function(e) {
  var y = e.latlng.lat.toFixed(0);
  var x = e.latlng.lng.toFixed(0);
  document.getElementById('coord-box').innerText = `X: ${x}, Y: ${y}`;
  console.log(`X: ${x}, Y: ${y}`);
});

</script>

</body>
</html>
-->

<!--

<!DOCTYPE html>
<html>
<head>
  <title>Museum Ovartaci</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    html, body { margin: 0; padding: 0; height: 100%; width: 100%; }

    #map { 
    position: absolute; 
    top: 0; 
    bottom: 0; 
    width: 100%; 
    height: 100%; 
}
    .leaflet-popup-content { font-size: 1.2em; }

    button { padding: 10px; font-size: 1em; }

    #coord-box {
      position: absolute;
      top: 10px;
      left: 10px;
      background: white;
      padding: 10px;
      border: 1px solid #aaa;
      z-index: 1000;
      font-family: 'Times New Roman', Times, serif;
    }

  
  .play-button {
    width: 50px; /* Adjust the size */
    height: 50px; /* Adjust the height */
    margin: 5px;
  }

  .pause-button {
    width: 55px; /* Adjust the size */
    height: 50px; /* Adjust the height */
    margin: 5px;
  }

  </style>
</head>
<body>

<div id="coord-box">Click on map to get X, Y</div>
<div id="map"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
  var map = L.map('map', {
    crs: L.CRS.Simple,
    minZoom: -1,
    maxZoom: 4
  });

  var imageWidth = 2500; 
  var imageHeight = 1500; 

  var bounds = [[0,0], [imageHeight, imageWidth]];
  var image = L.imageOverlay('Plan.png', bounds).addTo(map);
  var bounds = [[0, 0], [imageHeight, imageWidth]];
var image = L.imageOverlay('Plan.png', bounds).addTo(map);
    map.fitBounds(bounds); // Keep fitBounds to ensure the image fits the screen


  var locations = [
    {x: 728, y: 780, title: "HVORDAN FORST√ÖR <br> VI OS SELV ?", audio: "Forst√•r.m4a"},
    {x: 966, y: 802, title: "ER DU NORMAL?", audio: "Normal.m4a"},
    {x: 1148, y: 1042, title: "ET LIV MED MODS√ÜTNINGER", audio: "Mods√¶tninger.m4a"},
    {x: 1692, y: 1070, title: "GEMT OG GLEMT", audio: "Gemt.m4a"},
    {x: 1780, y: 257, title: "FANTASIENS KRAFT", audio: "Fantasi.m4a"},
  ];

  var redIcon = new L.Icon({
  iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png',
  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',
  iconSize: [25, 41],
  iconAnchor: [12, 41],
  popupAnchor: [1, -34],
  shadowSize: [41, 41]
});



locations.forEach(function(loc) {
  var marker = L.marker([loc.y, loc.x], { icon: redIcon }).addTo(map);
  var popupContent = `<b>${loc.title}</b><br>
                      <img class="play-button" src="play.png" onclick="playAudio('${loc.audio}')">
                      <img class="pause-button" src="pause.png" onclick="pauseAudio()">
                      `;
  marker.bindPopup(popupContent);
});


var currentAudio = null;

function playAudio(url) {
  if (currentAudio) {
    // Extract only the filename (decode URI because spaces become %20)
    const currentFile = decodeURI(currentAudio.src.split('/').pop());
    if (currentFile === url) {
      // Same file ‚Üí resume if paused
      if (currentAudio.paused) {
        currentAudio.play();
      }
      return; // Already playing or resumed
    } else {
      // Different file ‚Üí stop and replace
      currentAudio.pause();
    }
  }

  // Create and play new audio
  currentAudio = new Audio(url);
  currentAudio.play();
}

function pauseAudio() {
  if (currentAudio) {
    currentAudio.pause();
  }
}


// --- CLICK HELPER ---
map.on('click', function(e) {
  var y = e.latlng.lat.toFixed(0);
  var x = e.latlng.lng.toFixed(0);
  document.getElementById('coord-box').innerText = `X: ${x}, Y: ${y}`;
  console.log(`X: ${x}, Y: ${y}`);
});
</script>

</body>
</html>

-->